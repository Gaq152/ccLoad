/* =================================================================
   Theme System - ccLoad
   语义化变量系统，支持 Dark/Light 模式切换
   默认暗色主题，浅色主题通过 [data-theme="light"] 激活
   ================================================================= */

/* === Dark Mode (默认) === */
:root {
  /* 基础背景 */
  --theme-bg-body: #111217;
  --theme-bg-card: #181b1f;
  --theme-bg-panel: #1f2226;
  --theme-bg-input: rgba(0, 0, 0, 0.2);
  --theme-bg-input-focus: rgba(0, 0, 0, 0.3);
  --theme-bg-hover: rgba(255, 255, 255, 0.05);
  --theme-bg-active: rgba(255, 255, 255, 0.1);

  /* 文本颜色 */
  --theme-text-main: #dce1e6;
  --theme-text-muted: #8e95a3;
  --theme-text-subtle: #6b7280;
  --theme-text-inverse: #111217;

  /* 边框与分割线 */
  --theme-border: #2c3235;
  --theme-border-light: rgba(255, 255, 255, 0.08);
  --theme-border-focus: #5794f2;

  /* 功能色（暗色模式优化） */
  --theme-accent: #5794f2;
  --theme-success: #73bf69;
  --theme-warning: #f2cc0c;
  --theme-error: #f2495c;
  --theme-info: #6ed0e0;

  /* 玻璃态效果 */
  --theme-glass-bg: rgba(24, 27, 31, 0.85);
  --theme-glass-border: rgba(255, 255, 255, 0.08);
  --theme-glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);

  /* 阴影 */
  --theme-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
  --theme-shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);
  --theme-shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.5);

  /* 滚动条 */
  --theme-scrollbar-track: transparent;
  --theme-scrollbar-thumb: rgba(255, 255, 255, 0.35);
  --theme-scrollbar-thumb-hover: rgba(255, 255, 255, 0.5);

  /* 表格 */
  --theme-table-header-bg: rgba(255, 255, 255, 0.03);
  --theme-table-row-hover: rgba(255, 255, 255, 0.03);
  --theme-table-border: rgba(255, 255, 255, 0.05);

  /* Modal */
  --theme-modal-overlay: rgba(0, 0, 0, 0.7);
  --theme-modal-bg: #1f2226;

  /* 图标颜色 */
  --theme-icon-default: #8e95a3;
  --theme-icon-hover: #dce1e6;

  /* 徽章语义色 (Dark Mode: 深色半透明背景 + 亮色文字) */
  --theme-badge-error-bg: rgba(220, 38, 38, 0.2);
  --theme-badge-error-bg-gradient: linear-gradient(135deg, rgba(220, 38, 38, 0.2) 0%, rgba(185, 28, 28, 0.2) 100%);
  --theme-badge-error-text: #fca5a5;
  --theme-badge-error-border: rgba(220, 38, 38, 0.5);

  --theme-badge-success-bg: rgba(22, 163, 74, 0.2);
  --theme-badge-success-text: #86efac;
  --theme-badge-success-border: rgba(22, 163, 74, 0.5);

  --theme-badge-warning-bg: rgba(202, 138, 4, 0.2);
  --theme-badge-warning-text: #fde047;
  --theme-badge-warning-border: rgba(202, 138, 4, 0.5);

  --theme-badge-info-bg: rgba(37, 99, 235, 0.2);
  --theme-badge-info-text: #93c5fd;
  --theme-badge-info-border: rgba(37, 99, 235, 0.5);

  --theme-badge-purple-bg: rgba(139, 92, 246, 0.2);
  --theme-badge-purple-text: #c4b5fd;
  --theme-badge-purple-border: rgba(139, 92, 246, 0.5);

  /* Toast 渐变 */
  --theme-toast-success-bg: linear-gradient(135deg, rgba(16, 185, 129, 0.9) 0%, rgba(5, 150, 105, 0.9) 100%);
  --theme-toast-error-bg: linear-gradient(135deg, rgba(239, 68, 68, 0.9) 0%, rgba(220, 38, 38, 0.9) 100%);
  --theme-toast-info-bg: linear-gradient(135deg, rgba(59, 130, 246, 0.9) 0%, rgba(37, 99, 235, 0.9) 100%);

  /* 按钮交互状态 */
  --theme-btn-test-hover-bg: rgba(59, 130, 246, 0.15);
  --theme-btn-test-hover-border: rgba(59, 130, 246, 0.5);
  --theme-btn-test-hover-text: #93c5fd;

  --theme-btn-delete-hover-bg: rgba(239, 68, 68, 0.15);
  --theme-btn-delete-hover-border: rgba(239, 68, 68, 0.5);
  --theme-btn-delete-hover-text: #fca5a5;
  --theme-btn-delete-active-bg-gradient: linear-gradient(135deg, rgba(239, 68, 68, 0.2) 0%, rgba(185, 28, 28, 0.2) 100%);

  /* 日志行背景色 */
  --theme-bg-row-error: rgba(242, 73, 92, 0.12);    /* 5xx: 浅红色 */
  --theme-bg-row-warning: rgba(242, 204, 12, 0.08); /* 4xx: 浅黄色 */
}

/* === Light Mode === */
[data-theme="light"] {
  /* 基础背景 */
  --theme-bg-body: #f5f7fa;
  --theme-bg-card: #ffffff;
  --theme-bg-panel: #ffffff;
  --theme-bg-input: #ffffff;
  --theme-bg-input-focus: #ffffff;
  --theme-bg-hover: rgba(0, 0, 0, 0.04);
  --theme-bg-active: rgba(0, 0, 0, 0.08);

  /* 文本颜色 */
  --theme-text-main: #1f2937;
  --theme-text-muted: #6b7280;
  --theme-text-subtle: #9ca3af;
  --theme-text-inverse: #ffffff;

  /* 边框与分割线 */
  --theme-border: #e5e7eb;
  --theme-border-light: #f3f4f6;
  --theme-border-focus: #3b82f6;

  /* 功能色（浅色模式优化） */
  --theme-accent: #3b82f6;
  --theme-success: #10b981;
  --theme-warning: #f59e0b;
  --theme-error: #ef4444;
  --theme-info: #06b6d4;

  /* 玻璃态效果 */
  --theme-glass-bg: rgba(255, 255, 255, 0.8);
  --theme-glass-border: rgba(255, 255, 255, 0.5);
  --theme-glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);

  /* 阴影 */
  --theme-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --theme-shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
  --theme-shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);

  /* 滚动条 */
  --theme-scrollbar-track: transparent;
  --theme-scrollbar-thumb: rgba(0, 0, 0, 0.35);
  --theme-scrollbar-thumb-hover: rgba(0, 0, 0, 0.5);

  /* 表格 */
  --theme-table-header-bg: #f9fafb;
  --theme-table-row-hover: #f9fafb;
  --theme-table-border: #e5e7eb;

  /* Modal */
  --theme-modal-overlay: rgba(0, 0, 0, 0.5);
  --theme-modal-bg: #ffffff;

  /* 图标颜色 */
  --theme-icon-default: #6b7280;
  --theme-icon-hover: #1f2937;

  /* 徽章语义色 (Light Mode: 浅色背景 + 深色文字) */
  --theme-badge-error-bg: #fee2e2;
  --theme-badge-error-bg-gradient: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
  --theme-badge-error-text: #dc2626;
  --theme-badge-error-border: #fca5a5;

  --theme-badge-success-bg: #dcfce7;
  --theme-badge-success-text: #16a34a;
  --theme-badge-success-border: #86efac;

  --theme-badge-warning-bg: #fef9c3;
  --theme-badge-warning-text: #ca8a04;
  --theme-badge-warning-border: #fde047;

  --theme-badge-info-bg: #dbeafe;
  --theme-badge-info-text: #2563eb;
  --theme-badge-info-border: #93c5fd;

  --theme-badge-purple-bg: #f3e8ff;
  --theme-badge-purple-text: #8b5cf6;
  --theme-badge-purple-border: #c4b5fd;

  /* Toast 渐变 */
  --theme-toast-success-bg: linear-gradient(135deg, #10b981 0%, #059669 100%);
  --theme-toast-error-bg: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  --theme-toast-info-bg: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);

  /* 按钮交互状态 */
  --theme-btn-test-hover-bg: #eff6ff;
  --theme-btn-test-hover-border: #93c5fd;
  --theme-btn-test-hover-text: #3b82f6;

  --theme-btn-delete-hover-bg: #fef2f2;
  --theme-btn-delete-hover-border: #fca5a5;
  --theme-btn-delete-hover-text: #dc2626;
  --theme-btn-delete-active-bg-gradient: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);

  /* 日志行背景色 */
  --theme-bg-row-error: rgba(239, 68, 68, 0.15);    /* 5xx: 浅红色 */
  --theme-bg-row-warning: rgba(245, 158, 11, 0.12); /* 4xx: 浅黄色 */
}

/* === 过渡动画 === */
html {
  transition: background-color 0.3s ease;
}

html.theme-transition,
html.theme-transition *,
html.theme-transition *::before,
html.theme-transition *::after {
  transition: background-color 0.3s ease,
              border-color 0.3s ease,
              color 0.3s ease,
              box-shadow 0.3s ease !important;
}

/* === 主题切换按钮样式 === */
.theme-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border: none;
  border-radius: 8px;
  background: var(--theme-bg-hover);
  color: var(--theme-icon-default);
  cursor: pointer;
  transition: all 0.2s ease;
}

.theme-toggle:hover {
  background: var(--theme-bg-active);
  color: var(--theme-icon-hover);
}

.theme-toggle svg {
  width: 18px;
  height: 18px;
}

/* 旋转动画 */
.theme-toggle.rotating svg {
  animation: rotate-icon 0.5s ease;
}

@keyframes rotate-icon {
  0% { transform: rotate(0deg) scale(1); }
  50% { transform: rotate(180deg) scale(0.8); }
  100% { transform: rotate(360deg) scale(1); }
}

/* === JS 交互状态工具类 === */

/* 表格行高亮状态 */
.row-highlight {
  background-color: rgba(59, 130, 246, 0.08) !important;
}
.row-success {
  background-color: rgba(16, 185, 129, 0.1) !important;
}
.row-error {
  background-color: rgba(239, 68, 68, 0.1) !important;
}

/* UI 阴影脉冲效果 (用于 ui.js) */
.shadow-pulse-success {
  box-shadow: 0 6px 28px rgba(16, 185, 129, 0.25) !important;
  border-color: var(--theme-success) !important;
}
.shadow-pulse-error {
  box-shadow: 0 6px 28px rgba(239, 68, 68, 0.25) !important;
  border-color: var(--theme-error) !important;
}

[data-theme="light"] .shadow-pulse-success {
  box-shadow: 0 6px 28px rgba(16, 185, 129, 0.18) !important;
}
[data-theme="light"] .shadow-pulse-error {
  box-shadow: 0 6px 28px rgba(239, 68, 68, 0.18) !important;
}

/* 输入框高亮动画 (用于 channels-init.js) */
.input-highlight-anim {
  animation: anim-highlight-pulse 2s ease-out;
}

@keyframes anim-highlight-pulse {
  0% {
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.35),
                0 10px 25px rgba(59, 130, 246, 0.20);
    background-color: rgba(59, 130, 246, 0.06);
  }
  100% {
    box-shadow: none;
    background-color: transparent;
  }
}

/* === View Transitions API (主题切换圆形扩展动画) === */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}

/* === 日志行错误状态背景 === */
.log-row-error {
  background-color: var(--theme-bg-row-error) !important;
}

.log-row-warning {
  background-color: var(--theme-bg-row-warning) !important;
}

/* 悬停时保持区分度 */
.modern-table tbody tr.log-row-error:hover {
  background-color: var(--theme-bg-row-error) !important;
  filter: brightness(0.95);
}

.modern-table tbody tr.log-row-warning:hover {
  background-color: var(--theme-bg-row-warning) !important;
  filter: brightness(0.95);
}
